{{> navigation currentView="inventoryItems" }}

<main>
	<section>
		<header class="header-row">
			<h1>Inventory Items</h1>
			<div class="filter-wrapper">
				<label class="disabled">Filter by room</label>
				<select id="" disabled>
					<option></option>
				</select>
			</div>
		</header>

		{{#ifCond success "===" "added"}}
			{{> notification centered="true" type="success" message="Inventory item successfully added!"}}
		{{/ifCond}}

		{{#ifCond success "===" "edited"}}
			{{> notification centered="true" type="success" message="Inventory item successfully edited."}}
		{{/ifCond}}

		{{#ifCond success "===" "deleted"}}
			{{> notification centered="true" type="success" message="Inventory item successfully deleted."}}
		{{/ifCond}}

		<table>
			<thead>
				<tr>
					<th>ID</th>
					<th>Room</th>
					<th>Name</th>
					<th>Item Condition</th>
					<th class="col-table-button"></th>
					<th class="col-table-button"></th>
				</tr>
			</thead>
			<tbody>
				{{#each inventoryItems}}
				<tr>
					<td>{{this.itemID}}</td>
					<td>{{this.roomName}}</td>
					<td>{{this.name}}</td>
					<td>{{this.itemCondition}}</td>
					<td>
						<button class="table-button edit" 
						data-itemid="{{this.itemID}}"
						data-roomid="{{this.roomID}}"
						data-roomname="{{this.roomName}}"
						data-itemname="{{this.name}}"
						data-itemcondition="{{this.itemCondition}}"
						type="button"><i class="fa fa-pen-to-square"></i></button>
					</td>
					<td>
						<button class="table-button delete" type="button"><i class="fa fa-trash-can"></i></button>
					</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
		<button id="buttonInventoryItemAdd" type="button">Add New <i class="fa fa-plus"></i></button>
	</section>

	<section>
		<h1>Employees Responsible for Inventory Items</h1>
		<div class="filter-wrapper">
			<label class="disabled">Filter by employee</label>
			<select id="" disabled>
				<option></option>
			</select>
		</div>
		<table>
			<thead>
				<tr>
					<th>Item Name</th>
					<th>Employee</th>
				</tr>
			</thead>
			<tbody>
				{{#each inventoryItemsEmployees}}
				<tr>
					<td>#{{this.itemID}} - {{this.itemName}}</td>
					<td>{{this.employeeFullName}}</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
	</section>

	<section id="sectionInventoryItemAdd" class="{{#ifCond error.section "!==" "add"}}display-none{{/ifCond}}">
		<h1>Add Inventory Item</h1>
		<form method="POST">
			<div class="form-field">
				<label class="form-label">Name</label>
				<input type="text" name="itemName" />
			</div>
			<div class="form-field columns">
				<div class="column-label">
					<label class="form-label">Room</label>
					<p class="form-field-explanation">Optional</p>
				</div>
				<div class="column-input">
					<select name="room">
						{{#each rooms}}
						<option value="{{this.roomID}}">{{this.name}}</option>
						{{/each}}
					</select>
				</div>
			</div>
			<div class="form-field columns">
				<div class="column-label">
					<label class="form-label">Employee</label>
					<p class="form-field-explanation">Optional. Employee(s) responsible for item. Can select multiple.</p>
				</div>
				<div class="column-input">
					<select name="employee" multiple>
						{{#each employees}}
						<option value="{{this.employeeID}}">{{this.employeeFullName}}</option>
						{{/each}}
					</select>
				</div>
			</div>
			<div class="form-field">
				<label class="form-label">Item Condition</label>
				<input type="text" name="itemCondition" />
			</div>
			<div class="button-row">
				{{#ifCond error.section "===" "add"}}
					{{> notification message=error.message}}
				{{/ifCond}}
				<input type="submit" value="Add Inventory Item" />
			</div>
		</form>
	</section>
	<section id="sectionInventoryItemEdit" class="{{#ifCond error.section "!==" "edit"}}display-none{{/ifCond}}">
		<h1>Edit Inventory Item</h1>
		<form method="POST" id="formInventoryItemEdit">
			<input type="text" name="itemID" value="{{itemBeingEdited.itemID}}" hidden/>
			<div class="form-field">
				<label class="form-label">Name</label>
				<input type="text" name="itemName" value="{{itemBeingEdited.name}}"/>
			</div>
			<div class="form-field columns">
				<div class="column-label">
					<label class="form-label">Room</label>
					<p class="form-field-explanation">Optional</p>
				</div>
				<div class="column-input">
					<select name="room" value="{{itemBeingEdited.roomID}}">
						{{#each rooms}}
						<option value="{{this.roomID}}">{{this.name}}</option>
						{{/each}}
					</select>
				</div>
			</div>
			<div class="form-field columns">
				<div class="column-label">
					<label class="form-label">Employee</label>
					<p class="form-field-explanation">Optional. Employee(s) responsible for item. Can select multiple.</p>
				</div>
				<div class="column-input">
					{{!-- TODO: Figure out how to select multiple  --}}
					<select name="employee" multiple>
						{{#each employees}}
						<option value="{{this.employeeID}}">{{this.employeeFullName}}</option>
						{{/each}}
					</select>
				</div>
			</div>
			<div class="form-field">
				<label class="form-label">Item Condition</label>
				<input type="text" name="itemCondition" value="{{itemBeingEdited.itemCondition}}"/>
			</div>
			<div class="button-row">
				{{#ifCond error.section "===" "edit"}}
					{{> notification message=error.message}}
				{{/ifCond}}
				<input type="submit" value="Edit" />
			</div>
		</form>
	</section>
</main>

<script type="text/javascript" src="../js/inventoryItems.js"></script>