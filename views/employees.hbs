{{> navigation currentView="employees" }}

<main>
	<section>
		<h1>Employees</h1>

		{{#ifCond success "===" "added"}}
			{{> notification centered="true" type="success" message="Employee successfully added!"}}
		{{/ifCond}}

		{{#ifCond success "===" "edited"}}
			{{> notification centered="true" type="success" message="Employee successfully edited."}}
		{{/ifCond}}

		{{#ifCond success "===" "deleted"}}
			{{> notification centered="true" type="success" message="Employee successfully deleted."}}
		{{/ifCond}}


		<table>
			<thead>
				<tr>
					<th>ID</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Email</th>
					<th>Job Title</th>
					<th>Start Date</th>
					<th>End Date</th>
					<th>Salary</th>
					<th class="col-table-button"></th>
					<th class="col-table-button"></th>
				</tr>
			</thead>
			<tbody>
				{{#each employees}}
				<tr>
					<td>{{this.employeeID}}</td>
					<td>{{this.firstName}}</td>
					<td>{{this.lastName}}</td>
					<td>{{this.email}}</td>
					<td>{{this.jobTitle}}</td>
					<td>{{this.startDate}}</td>
					<td>{{this.endDate}}</td>
					<td>${{this.salary}}</td>
					<td>
						<button class="table-button edit" 
						data-employeeid="{{this.employeeID}}" 
						data-firstname="{{this.firstName}}" 
						data-lastname="{{this.lastName}}" 
						data-email="{{this.email}}" 
						data-jobtitle="{{this.jobTitle}}" 
						data-startdate="{{this.startDate}}" 
						data-enddate="{{this.endDate}}" 
						data-salary="{{this.salary}}" 
						type="button">
							<i class="fa fa-pen-to-square"></i>
						</button>
					</td>
					<td>
						<form method="DELETE" action="/employees/delete/{{this.employeeID}}" class="form-delete">
							<input type="submit" class="table-button delete" value=""/>
							<span class="icon-delete"><i class="fa fa-trash-can"></i></span>
						</form>
					</td>
				</tr>
				{{/each}}
			</tbody>
		</table>
		<button id="buttonEmployeeAdd" type="button">Add New <i class="fa fa-plus"></i></button>
	</section>
	<section id="sectionEmployeeAdd" class="{{#ifCond error.section "!==" "add"}}display-none{{/ifCond}}">
		<h1>Add Employee</h1>
		<form method="POST" action="/employees/add" id="formEmployeeAdd">
			<div class="form-field">
				<label class="form-label">First Name</label>
				<input type="text" name="firstName" />
			</div>
			<div class="form-field">
				<label class="form-label">Last Name</label>
				<input type="text" name="lastName" />
			</div>
			<div class="form-field">
				<label class="form-label">Email</label>
				<input type="text" name="email" />
			</div>
			<div class="form-field">
				<label class="form-label">Job Title</label>
				<input type="text" name="jobTitle" />
			</div>
			<div class="form-field">
				<label class="form-label">Start Date</label>
				<input type="date" name="startDate" />
			</div>
			<div class="form-field">
				<label class="form-label">End Date</label>
				<input type="date" name="endDate" />
			</div>
			<div class="form-field">
				<label class="form-label">Salary</label>
				<input type="text" name="salary" />
			</div>
			<div class="button-row">
				{{#ifCond error.section "===" "add"}}
					{{> notification message=error.message}}
				{{/ifCond}}
				<input type="submit" value="Add Employee" />
			</div>
		</form>
	</section>
	<section id="sectionEmployeeEdit" class="{{#ifCond error.section "!==" "edit"}}display-none{{/ifCond}}">
		<h1>Edit Employee</h1>
		<form method="POST" action="/employees/edit" id="formEmployeeEdit">
			<input type="text" name="employeeID" value="{{employeeBeingEdited.employeeID}}" hidden/>
			<div class="form-field">
				<label class="form-label">First Name</label>
				<input type="text" name="firstName" value="{{employeeBeingEdited.firstName}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">Last Name</label>
				<input type="text" name="lastName" value="{{employeeBeingEdited.lastName}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">Email</label>
				<input type="text" name="email" value="{{employeeBeingEdited.email}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">Job Title</label>
				<input type="text" name="jobTitle" value="{{employeeBeingEdited.jobTitle}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">Start Date</label>
				<input type="date" name="startDate" value="{{employeeBeingEdited.startDate}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">End Date</label>
				<input type="date" name="endDate" value="{{employeeBeingEdited.endDate}}"/>
			</div>
			<div class="form-field">
				<label class="form-label">Salary</label>
				<input type="text" name="salary" value="{{employeeBeingEdited.salary}}"/>
			</div>
			<div class="button-row">
				{{#ifCond error.section "===" "edit"}}
					{{> notification message=error.message}}
				{{/ifCond}}
				<input type="submit" value="Edit" />
			</div>
		</form>
	</section>
</main>

<script type="text/javascript" src="../js/employees.js"></script>